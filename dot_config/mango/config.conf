# Monitors
monitorrule = eDP-1, 0.6, 1, scroller, 0, 1, 0, 0, 1920, 1080, 60
monitorrule = HDMI-A-1, 0.55, 1, grid, 0, 1, 1366, 0, 1360, 768, 60.015
allow_tearing=1

# System environment
env = DISPLAY,:3
env = QT_QPA_PLATFORM, wayland
env = GDK_BACKEND, wayland
env = SDL_VIDEODRIVER, wayland
env = CLUTTER_BACKEND, wayland

env = ELECTRON_ENABLE_WAYLAND, 1
env = ELECTRON_OZONE_PLATFORM_HINT, wayland
env = CHROMIUM_FLAGS, --enable-features=UseOzonePlatform --ozone-platform=wayland
env = MOZ_ENABLE_WAYLAND, 1
env = _JAVA_AWT_WM_NONREPARENTING, 1

env = ICON_THEME, Qogir

env = GTK_IM_MODULE, fcitx
env = QT_IM_MODULE, fcitx
env = SDL_IM_MODULE, fcitx
env = XMODIFIERS, @im=fcitx

# exec
exec = xwayland-satellite :3
exec = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP=wlroots
exec-once = sunsetr
exec-once = wl-paste --type text --watch cliphist store
exec-once = wl-paste --type image --watch cliphist store
exec-once = awww-daemon
exec-once = qs
exec-once = fcitx5 &

# misc
allow_lock_transparent=1

cursor_size = 25
cursor_theme = Drop-Purple
drag_tile_to_tile = 1

focus_cross_monitor = 1
exchange_cross_monitor = 1
focus_cross_tag = 1

# Appearance
borderpx = 0
gappih = 9
gappiv = 6
gappoh = 8
gappov = 8


border_radius = 4
focused_opacity = 1.0
unfocused_opacity = 0.98

animations = 1
layer_animations = 1
animation_type_open = slide
animation_type_close = zoom
animation_fade_in = 1
animation_fade_out = 1
fadein_begin_opacity = 0.5
fadeout_begin_opacity = 0.8

tag_animation_direction = 1
zoom_initial_ratio = 0.3
zoom_end_ratio = 0.8

animation_duration_move = 300
animation_duration_open = 300
animation_duration_tag = 300
animation_duration_close = 400
animation_duration_focus = 0
animation_curve_open = 0.46, 0.03, 0.52, 0.95 
animation_curve_move = 0.46,1.0,0.29,1
animation_curve_tag=0.46,1.0,0.29,1
animation_curve_close=0.08,0.92,0,1
animation_curve_focus=0.46,1.0,0.29,1
animation_curve_opafadeout=0.5,0.5,0.5,0.5
animation_curve_opafadein=0.46,1.0,0.29,1

# Scroller Layout Setting
scroller_structs = 10
scroller_default_proportion = 0.7
edge_scroller_pointer_focus = 0
scroller_default_proportion_single = 1.0
scroller_proportion_preset = 0.3, 0.5, 0.8, 1.0

# Master-Stack Layout Setting
new_is_master = 1
default_mfact = 0.6
smartgaps = 1

# Overview Setting
hotarea_size = 7
enable_hotarea = 1
ov_tab_mode = 1
overviewgappi = 5
overviewgappo = 20

# keyboard
repeat_rate = 25
repeat_delay = 600
numlockon = 0
xkb_rules_layout = us

# Trackpad
disable_trackpad = 0
tap_to_click = 1
tap_and_drag = 1
drag_lock = 1
trackpad_natural_scrolling = 1
disable_while_typing = 1
left_handed = 0
middle_button_emulation = 0
swipe_min_threshold = 15

# mouse
# need relogin to make it apply
mouse_natural_scrolling = 0


# Key Bindings
bind = SUPER, r, reload_config

bind = SUPER, space, spawn, fuzzel
bind = SUPER, Return, spawn, foot

bind = SUPER+SHIFT+ALT, q, quit
bind = SUPER, q, killclient,

bind = SUPER, Tab, focusstack, next
bind = SUPER+SHIFT, Tab, focusstack, prev
bind = SUPER, h, focusdir, left
bind = SUPER, l, focusdir, right
bind = SUPER, k, focusdir, up
bind = SUPER, j, focusdir, down

# swap window
bind = SUPER+SHIFT, h, exchange_client, left
bind = SUPER+SHIFT, l, exchange_client, right
bind = SUPER+SHIFT, k, exchange_client, up
bind = SUPER+SHIFT, j, exchange_client, down

# switch window status
bind = SUPER, g, toggleglobal,
bind = ALT, Tab, toggleoverview,
bind = SUPER, backslash, togglefloating,
bind = SUPER, a, togglemaximizescreen,
bind = SUPER, f, togglefullscreen,
bind = SUPER+SHIFT, f, togglefakefullscreen,
bind = SUPER, i, minimized,
bind = SUPER, o, toggleoverlay,
bind = SUPER+SHIFT, i, restore_minimized
bind = ALT, z, toggle_scratchpad

# scroller layout
bind = SUPER, e,set_proportion, 1.0
bind = SUPER, x, switch_proportion_preset,

# switch layout
bind = SUPER, n, switch_layout

# tag switch
bind = CTRL+SUPER, h, viewtoleft, 0
bind = CTRL, h, viewtoleft_have_client, 0
bind = CTRL+SUPER, l, viewtoright, 0
bind = CTRL, l, viewtoright_have_client, 0
bind = ALT+SUPER, h, tagtoleft, 0
bind = ALT+SUPER, l, tagtoright, 0

bind = SUPER, 1, view, 1, 0
bind = SUPER, 2, view, 2, 0
bind = SUPER, 3, view, 3, 0
bind = SUPER, 4, view, 4, 0
bind = SUPER, 5, view, 5, 0
bind = SUPER, 6, view, 6, 0
bind = SUPER, 7, view, 7, 0
bind = SUPER, 8, view, 8, 0
bind = SUPER, 9, view, 9, 0

# tag: move client to the tag and focus it
# tagsilent: move client to the tag and not focus it
# bind=Alt,1,tagsilent,1
bind = Alt, 1, tag, 1, 0
bind = Alt, 2, tag, 2, 0
bind = Alt, 3, tag, 3, 0
bind = Alt, 4, tag, 4, 0
bind = Alt, 5, tag, 5, 0
bind = Alt, 6, tag, 6, 0
bind = Alt, 7, tag, 7, 0
bind = Alt, 8, tag, 8, 0
bind = Alt, 9, tag, 9, 0

# monitor switch
bind = alt+shift, h, focusmon, left
bind = alt+shift, l, focusmon, right
bind = SUPER+Alt, h, tagmon, left
bind = SUPER+Alt, l, tagmon, right

# gaps
bind = ALT+SHIFT, x, incgaps, 1
bind = ALT+SHIFT, z, incgaps, -1
bind = ALT+SHIFT, r, togglegaps

# movewin
bind = CTRL+SHIFT, h, movewin, -50, +0
bind = CTRL+SHIFT, l, movewin, +50, +0
bind = CTRL+SHIFT, j, movewin, +0, +50
bind = CTRL+SHIFT, k, movewin, +0, -50

# resizewin
bind = CTRL+ALT, h, resizewin, -50, +0
bind = CTRL+ALT, l, resizewin, +50, +0
bind = CTRL+ALT, j, resizewin, +0, +50
bind = CTRL+ALT, k, resizewin, +0, -50

# Mouse Button Bindings
mousebind = SUPER, btn_left, moveresize, curmove
mousebind = NONE, btn_middle, togglemaximizescreen, 0
mousebind = SUPER, btn_right, moveresize, curresize
mousebind = NONE, btn_left, toggleoverview, 1
mousebind = NONE, btn_right, killclient, 0

# Axis Bindings
axisbind = SUPER, UP, viewtoleft_have_client
axisbind = SUPER, DOWN, viewtoright_have_client

# Screenshot
bind = SUPER, s, spawn_shell, wayfreeze --hide-cursor & PID=$!; sleep .1; grim -g "$(slurp)" - | wl-copy; kill $PID
bind = SUPER+SHIFT, s, spawn_shell, mkdir -p ~/Pictures/Screenshots; wayfreeze --hide-cursor & PID=$!; sleep .1; geom=$(slurp); [ -n "$geom" ] && grim -g "$geom" ~/Pictures/Screenshots/Screenshot-$(date +'%Y-%m-%d-%H%M%S').png; kill $PID

# Volume
bindl = NONE, XF86AudioRaiseVolume, spawn, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%+
bindl = NONE, XF86AudioLowerVolume, spawn, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bindl = NONE, XF86AudioMute, spawn, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle

# Brightness
bind = NONE, XF86MonBrightnessUp, spawn, brightnessctl set 5%+
bind = NONE, XF86MonBrightnessDown, spawn, brightnessctl set 5%-

# Blue light
bind = SUPER, P, spawn, ~/bin/scripts/filter.sh

# Pick a wallpaper
bind = SUPER+SHIFT, w, spawn_shell, echo toggle > /tmp/qs_wallpaper_toggle

# Clipboard history
bind = ALT, x, spawn_shell, cliphist list | fuzzel --dmenu --with-nth 2 | cliphist decode | wl-copy
# Apps
bind = SUPER, y, spawn, foot -e yazi

# Record
bind = Alt, r, spawn, ~/bin/scripts/record.sh

